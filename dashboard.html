<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>CodePen - The Team - 001</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900"
    />
    <link
      rel="stylesheet"
      href="https://www.elegantthemes.com/preview/Divi/wp-content/themes/Divi/style.css?ver=2.7.3"
    />
    <link
      rel="stylesheet"
      href="https://www.elegantthemes.com/preview/Divi/wp-content/themes/Divi/epanel/shortcodes/css/shortcodes.css?ver=2.7.3"
    />
    <link rel="stylesheet" href="./styles/dashboard.css" />
  </head>
  <body>
    <!-- partial:index.partial.html -->
    <div class="button-container">
      <svg xmlns="http://www.w3.org/2000/svg" version="1.1">
        <defs>
          <filter id="gooey">
            <feGaussianBlur in="SourceGraphic" stdDeviation="5" result="blur" />
            <feColorMatrix
              in="blur"
              type="matrix"
              values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9"
              result="highContrastGraphic"
            />
            <feComposite
              in="SourceGraphic"
              in2="highContrastGraphic"
              operator="atop"
            />
          </filter>
        </defs>
      </svg>

      <button id="gooey-button" onclick="logout()">
        Logout?
        <span class="bubbles">
          <span class="bubble"></span>
          <span class="bubble"></span>
          <span class="bubble"></span>
          <span class="bubble"></span>
          <span class="bubble"></span>
          <span class="bubble"></span>
          <span class="bubble"></span>
          <span class="bubble"></span>
          <span class="bubble"></span>
          <span class="bubble"></span>
        </span>
      </button>
    </div>
    <div class="container">
      <div class="at-section">
        <div class="at-section__title" id="greetings"></div>
      </div>
      <button
        style="--content: 'Add a New Code-Snippet'"
        onclick="newCodeSnippet()"
      >
        <div class="left"></div>
        Add a New Code-Snippet
        <div class="right"></div>
      </button>
      <br />
      <br />
      <div class="at-grid" data-column="3" id="grid"></div>
    </div>
    <script>
      if (!localStorage.getItem("userName")) {
        document.body.innerHTML = "";
        document.body.innerHTML = `<h1>Please Sign-in First</h1> <a href="./login.html">Login/Sign-up</a>`;
      } else {
        document.getElementById(
          "greetings"
        ).innerHTML = `Hello ${localStorage.getItem("userName")}  `;
        let username = localStorage.getItem("userName");
        let ob = JSON.parse(localStorage.getItem(username));
        let addCodesHereWithHTML = "";
        ob.codes.forEach((mycode) => {
          addCodesHereWithHTML += `<div class="at-column" ">
          <div class="at-user">
            <div class="at-user__name">${mycode.name}</div>
          </div>
        </div>`;
        });
        document.getElementById("grid").innerHTML = addCodesHereWithHTML;
      }
      function newCodeSnippet() {
        window.location.href = "/codeeditor.html";
      }
      function addDefaults(name, code) {
        localStorage.setItem("default-name", name);
        localStorage.setItem("default-code", code);
        console.log(localStorage.getItem("default-name"));
      }

      function logout() {
        localStorage.removeItem("userName");
        localStorage.removeItem("default-name");
        localStorage.removeItem("default-code");
        window.location.href = "/";
      }
    </script>
    <!-- partial -->
  </body>
</html>
